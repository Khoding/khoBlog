{% extends 'blog/base_post_main_block.html' %}
{% load static %}
{% load markdown_extra %}

{% block page_top_title %}
    <h2>{{ title }}
        <div class="btn-group float-right" role="group" aria-label="Previous / Next">
            <a class="btn btn-primary" href="{{ post.get_previous_by_created_date.get_absolute_url }}">
                <svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-chevron-left" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                    <path fill-rule="evenodd" d="M11.354 1.646a.5.5 0 0 1 0 .708L5.707 8l5.647 5.646a.5.5 0 0 1-.708.708l-6-6a.5.5 0 0 1 0-.708l6-6a.5.5 0 0 1 .708 0z"/>
                </svg>
            </a>

            <a class="btn btn-primary" href="{{ post.get_next_by_created_date.get_absolute_url }}">
                <svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-chevron-right" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                    <path fill-rule="evenodd" d="M4.646 1.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 0 .708l-6 6a.5.5 0 0 1-.708-.708L10.293 8 4.646 2.354a.5.5 0 0 1 0-.708z"/>
                </svg>
            </a>
        </div>
    </h2>
{% endblock page_top_title %}

{% block content_main %}

    {% if post.published_date and not post.private and not post.published_date > now or not post.published_date and user.is_superuser or post.private and user.is_superuser or post.published_date > now and user.is_superuser %}

        <div class="card text-white border-secondary bg-dark mb-3">
            <div class="card-header border-secondary">
                <h2>Post #{{ post.id }} {% include 'blog/superbuttons.html' %}</h2>
            </div>

            <div class="card-body">
                <h2 class="card-title">{{ post.title }}</h2>
                <div class="blog-post-meta">
                    {% include 'blog/postdates.html' %}
                </div>
                <span class="card-text">{{ post.body|formatted_markdown|safe }}</span>
            </div>

            <div id="comments" class="card-footer border-secondary">
                <div class="btn-group-vertical d-flex col-12 col-lg-5 p-0" role="group" aria-label="Comments Group">
                    <a class="btn btn-primary d-block" href="{% url 'blog:add_comment_to_post' pk=post.pk %}">Add comment</a>
                </div>
                {% include 'blog/postcomments.html' %}
            </div>

        </div>

    {% else %}
        <h1><a class="btn btn-danger" href="/pages/kheee">This post is either private or still a draft, you must be logged in
            to be able to see it</a></h1>
    {% endif %}
{% endblock content_main %}

{% block pagination %}
{% endblock pagination %}
