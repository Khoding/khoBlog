{% load markdown_extra %}

{% if post.approved_comments.count or user.is_superuser %}
    {% for comment in post.comments.all %}
        {% if comment.approved_comment or not comment.approved_comment and user.is_superuser %}
            <div class="card text-white border-secondary bg-dark mt-3">
                <div class="card-header">
                    <h4>
                    {% if comment.author %}
                        {{ comment.author }}
                    {% else %}
                        {{ comment.author_logged }}
                    {% endif %}
                        <span class="float-right">
                            {% if user.is_superuser %}
                                <div class="btn-group d-flex col-12 col-lg-5 p-0" role="group" aria-label="Comments Group">
                                    {% if not comment.approved_comment %}
                                        <a class="btn btn-light" href="{% url 'blog:comment_remove' pk=comment.pk %}">
                                            <i class="bi bi-trash"></i>
                                        </a>

                                        <a class="btn btn-light" href="{% url 'blog:comment_approve' pk=comment.pk %}">
                                            <i class="bi bi-check-square"></i>
                                        </a>
                                    {% endif %}

                                    <a class="btn btn-light" href="{% url 'blog:edit_post_comment' pk=comment.pk %}">
                                        <i class="bi bi-pencil-square"></i>
                                    </a>
                                </div>
                            {% endif %}
                        </span>
                    </h4>
                </div>
                <ul class="list-group list-group-flush">
                    <li class="list-group-item text-white border-secondary bg-dark">{{ comment.created_date|date:'l, d F Y' }}
                        - {{ comment.created_date|time:"G:i:s" }}</li>
                    {% autoescape on %}
                        <li class="list-group-item text-white border-secondary bg-dark">{{ comment.message }}</li>
                    {% endautoescape %}
                </ul>
            </div>

        {% endif %}
    {% empty %}
        <p>No comments here yet.</p>
    {% endfor %}
{% else %}
    <p>No comments here yet.</p>
{% endif %}