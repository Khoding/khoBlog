<article class="flex" x-data="{ open: false, focus: false }" @keydown.window.escape="open = false" @close-popover-group.window="onClosePopoverGroup">
  <section class="relative flex">
    <button type="button" x-state:on="Item active" x-state:off="Item inactive" class="group flyout_button" @click="open=!open" @mousedown="if (open) $event.preventDefault()" aria-expanded="false" :aria-expanded="open.toString()" :class="{ 'border-cornflower-600 text-cornflower-600 dark:border-cornflower-300 dark:text-cornflower-300': open, 'border-transparent': !(open) }">
      {{ menu }}
    </button>
  </section>
  <section x-show="open" x-transition:enter="transition ease-out duration-200" x-transition:enter-start="opacity-0" x-transition:enter-end="opacity-100" x-transition:leave="transition ease-in duration-150" x-transition:leave-start="opacity-100" x-transition:leave-end="opacity-0" x-description="'Main' mega menu, show/hide based on flyout menu state." class="absolute top-full inset-x-0 text-gray-900 dark:text-jumbo-200 sm:text-sm" x-ref="panel" @click.away="open = false" style="display: none;">
    <!-- Presentational element used to render the bottom shadow, if we put the shadow on the actual panel it pokes out the top, so we use this shorter element to hide the top of the shadow -->
    <div class="absolute inset-0 top-1/2 bg-white dark:bg-jumbo-900 shadow" aria-hidden="true"></div>

    <div class="relative bg-white dark:bg-jumbo-900">
      <div class="max-w-7xl mx-auto px-8">
        {% block menu %}
        {% endblock menu %}
      </div>
    </div>
  </section>
</article>
