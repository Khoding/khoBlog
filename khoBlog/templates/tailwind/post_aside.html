{% load read_time comments %}

<h2 class="sr-only">Details</h2>
<article class="space-y-5">
  <section class="flex items-center space-x-2">
    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-gray-400 dark:text-jumbo-100" viewbox="0 0 20 20" fill="currentColor">
      <path d="M10 12a2 2 0 100-4 2 2 0 000 4z"/>
      <path fill-rule="evenodd" d="M.458 10C1.732 5.943 5.522 3 10 3s8.268 2.943 9.542 7c-1.274 4.057-5.064 7-9.542 7S1.732 14.057.458 10zM14 10a4 4 0 11-8 0 4 4 0 018 0z" clip-rule="evenodd"/>
    </svg>
    {% if object.pub_date and not object.withdrawn %}
      {% if object.was_published_recently %}
        <span class="text-green-400 text-sm font-medium">New Post</span>
      {% elif object.is_scheduled %}
        <a class="text-orange-400 text-sm font-medium hover:underline" href="{% url 'blog:post_scheduled_list' %}">Scheduled</a>
      {% else %}
        <span class="text-gray-500 dark:text-jumbo-50 text-sm font-medium">Published</span>
      {% endif %}
    {% elif not object.pub_date %}
      <a class="text-slate-500 dark:text-slate-300 text-sm font-medium hover:underline" href="{% url 'blog:post_draft_list' %}">Draft</a>
    {% else %}
      <a class="text-red-500 dark:text-flamingo-600 text-sm font-medium hover:underline" href="{% url 'blog:post_withdrawn_list' %}">Withdrawn</a>
    {% endif %}
  </section>
  <section class="flex items-center space-x-2">
    <svg class="h-5 w-5 text-gray-400 dark:text-jumbo-100" x-description="Heroicon name: solid/calendar" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 20 20" fill="currentColor" aria-hidden="true">
      <path fill-rule="evenodd" d="M6 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3a1 1 0 00-1-1zm0 5a1 1 0 000 2h8a1 1 0 100-2H6z" clip-rule="evenodd"></path>
    </svg>
    <a href="{% url 'blog:archive_day' year=object.created_date|date:'Y' month=object.created_date|date:'M' day=object.created_date|date:'d' %}" class="text-gray-900 dark:text-jumbo-50 text-sm font-medium hover:underline">Created on
      {{ object.created_date|date:'D, d M Y H:i' }}</a>
  </section>
  {% if object.pub_date %}
    <section class="flex items-center space-x-2">
      <svg class="h-5 w-5 text-gray-400 dark:text-jumbo-100" x-description="Heroicon name: solid/calendar" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 20 20" fill="currentColor" aria-hidden="true">
        <path fill-rule="evenodd" d="M6 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3a1 1 0 00-1-1zm0 5a1 1 0 000 2h8a1 1 0 100-2H6z" clip-rule="evenodd"></path>
      </svg>
      <a href="{% url 'blog:archive_day' year=object.pub_date|date:'Y' month=object.pub_date|date:'M' day=object.pub_date|date:'d' %}" class="text-gray-900 dark:text-jumbo-50 text-sm font-medium hover:underline">Published on
        {{ object.pub_date|date:'D, d M Y H:i' }}</a>
    </section>
  {% endif %}
  <section class="flex items-center space-x-2">
    <svg class="h-5 w-5 text-gray-400 dark:text-jumbo-100" x-description="Heroicon name: solid/calendar" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 20 20" fill="currentColor" aria-hidden="true">
      <path fill-rule="evenodd" d="M6 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3a1 1 0 00-1-1zm0 5a1 1 0 000 2h8a1 1 0 100-2H6z" clip-rule="evenodd"></path>
    </svg>
    <a href="{% url 'blog:archive_day' year=object.mod_date|date:'Y' month=object.mod_date|date:'M' day=object.mod_date|date:'d' %}" class="text-gray-900 dark:text-jumbo-50 text-sm font-medium hover:underline">Updated on
      {{ object.mod_date|date:'D, d M Y H:i' }}</a>
  </section>
  <section class="flex items-center space-x-2">
    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-gray-400 dark:text-jumbo-100" viewbox="0 0 20 20" fill="currentColor">
      <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"/>
    </svg>
    <span class="text-gray-900 dark:text-jumbo-50 text-sm font-medium">
      {{ object.body|readtime }}
    </span>
  </section>
  {% get_comment_count for post as comment_count %}

  <section class="flex items-center space-x-2">
    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-gray-400 dark:text-jumbo-100" fill="none" viewbox="0 0 24 24" stroke="currentColor" stroke-width="2">
      <path stroke-linecap="round" stroke-linejoin="round" d="M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"/>
    </svg>
    <a href="#comments" class="text-gray-900 dark:text-jumbo-50 text-sm font-medium hover:underline">{{ comment_count }}
      comment{{ comment_count|pluralize:'s' }}</a>
  </section>
</article>

<article class="mt-6 border-t border-gray-200 dark:border-jumbo-200 py-6 space-y-8">
  {% if object.url_to_article %}
    <section>
      <h2 class="text-sm font-medium text-gray-500 dark:text-jumbo-100">Linked article</h2>
      <a href="{{ object.url_to_article }}" class="text-sm font-medium text-gray-900 dark:text-jumbo-50 hover:underline">
        {% firstof object.url_to_article_title object.url_to_article %}
      </a>
    </section>
  {% endif %}

  <section>
    <h2 class="text-sm font-medium text-gray-500 dark:text-jumbo-100">Categories</h2>
    <ul role="list" class="mt-2 leading-8">
      {% for category in object.categories.all %}
        {% if not category.withdrawn or user.is_superuser %}
          {% spaceless %}
            <li class="inline">
              <a href="{% url 'blog:post_category_list' slug=category.slug %}" class="relative inline-flex items-center rounded-full border border-jumbo-300 px-3 py-0.5">
                <div class="text-sm font-medium text-gray-900 dark:text-jumbo-50">{{ category }}</div>
              </a>
              <!-- space -->
            </li>
          {% endspaceless %}
        {% endif %}
      {% endfor %}
    </ul>
  </section>

  <section>
    <h2 class="text-sm font-medium text-gray-500 dark:text-jumbo-100">Tags</h2>
    <ul role="list" class="mt-2 leading-8">
      {% if not user.is_superuser %}
        {% for tag in object.get_tags %}
          {% spaceless %}
            <li class="inline">
              <a href="{% url 'custom_taggit:post_tagged_with' slug=tag.slug %}" class="relative inline-flex items-center rounded-full border border-jumbo-300 px-3 py-0.5">
                <div class="absolute flex-shrink-0 flex items-center justify-center">
                  <span class="h-1.5 w-1.5 rounded-full" style="background-color: {{ tag.color }}" aria-hidden="true"></span>
                </div>
                <div class="ml-3.5 text-sm font-medium text-gray-900 dark:text-jumbo-50">{{ tag }}</div>
              </a>
              <!-- space -->
            </li>
          {% endspaceless %}
        {% endfor %}
      {% else %}
        {% for tag in object.get_admin_tags %}
          {% spaceless %}
            <li class="inline">
              <a href="{% url 'custom_taggit:post_tagged_with' slug=tag.slug %}" class="relative inline-flex items-center rounded-full border border-gray-200 dark:border-jumbo-200 px-3 py-0.5">
                <div class="absolute flex-shrink-0 flex items-center justify-center">
                  <span class="h-1.5 w-1.5 rounded-full" style="background-color: {{ tag.color }}" aria-hidden="true"></span>
                </div>
                <div class="ml-3.5 text-sm font-medium text-gray-900 dark:text-jumbo-50">{{ tag }}</div>
              </a>
              <!-- space -->
            </li>
          {% endspaceless %}
        {% endfor %}
      {% endif %}
    </ul>
  </section>

  <section>
    <h2 class="text-sm font-medium text-gray-500 dark:text-jumbo-100">Related content</h2>
    <ul role="list" class="mt-2 leading-8">
      {% for e in similar_posts %}
        {% if not e.withdrawn and not e.is_scheduled or user.is_superuser %}
          {% spaceless %}
            <li class="inline">
              <a href="{{ e.get_absolute_url }}" class="relative inline-flex items-center rounded-full border border-jumbo-300 dark:border-jumbo-200 px-3 py-0.5">
                <div class="text-sm font-medium text-gray-900 dark:text-jumbo-50">{{ e }}</div>
              </a>
              <!-- space -->
            </li>
          {% endspaceless %}
        {% endif %}
      {% endfor %}
    </ul>
  </section>

  {% if series %}
    <section>
      <h2 class="text-sm font-medium text-gray-500 dark:text-jumbo-100">Series</h2>
      <dl class="mt-5 grid grid-cols-1 gap-5">
        <div class="px-4 py-5 bg-white dark:bg-jumbo-700 shadow rounded-lg overflow-hidden sm:p-6">
          <dt class="text-sm font-medium text-gray-500 dark:text-jumbo-100 truncate">
            <a class="text-base" href="{% url 'blog:post_series_list' slug=object.series.slug %}">{{ object.series.title }}</a>
          </dt>
          <dd class="mt-1 text-3xl font-semibold text-jumbo-900 dark:text-jumbo-50">
            {% if series.description %}
              {{ series.description }}
              -
            {% endif %}
            ({{ series.all.count }}
            Part series)
          </dd>
        </div>
        {% for e in series.all %}
          <div class="px-4 py-5 bg-white dark:bg-jumbo-700 shadow rounded-lg overflow-hidden sm:p-6">
            <dt class="text-sm font-medium text-gray-500 dark:text-jumbo-100 truncate">
              {% if not e.is_scheduled or user.is_superuser %}
                <a href="{% url 'blog:post_detail' slug=e.slug %}">Part #{{ forloop.counter }}:
                  {{ e }}
                  {% if e == object %}
                    <span class="italic text-sm">(You are here)</span>
                  {% endif %}
                  {% if e.is_scheduled %}
                    <span class="italic">
                      (Coming:
                      {{ e.pub_date|date:'l, d F Y H:i:s' }})
                    </span>
                  {% endif %}
                </a>
              {% else %}
                <span>Part #{{ forloop.counter }}:
                  {{ e }}
                  {% if e == object %}
                    <span>(You are here)</span>
                  {% endif %}
                  {% if e.is_scheduled %}
                    <span class="italic">
                      (Coming:
                      {{ e.pub_date|date:'l, d F Y H:i:s' }})
                    </span>
                  {% endif %}
                </span>
              {% endif %}
            </dt>
            <dd class="mt-1 font-semibold text-gray-900 dark:text-jumbo-50">
              {{ e.description }}
            </dd>
          </div>
        {% endfor %}
      </dl>
    </section>
  {% endif %}

  <div>
    <h2 class="text-sm font-medium text-gray-500 dark:text-jumbo-100">Stats</h2>
    <dl class="mt-5 grid grid-cols-1 gap-5">
      <div class="px-4 py-5 bg-white dark:bg-jumbo-700 shadow rounded-lg overflow-hidden sm:p-6">
        <dt class="text-sm font-medium text-gray-500 dark:text-jumbo-100 truncate">
          Seen
        </dt>
        <dd class="mt-1 text-3xl font-semibold text-gray-900 dark:text-jumbo-50">
          {{ object.clicks }}
          time{{ object.clicks|pluralize:'s' }}
        </dd>
      </div>
      <div class="px-4 py-5 bg-white dark:bg-jumbo-700 shadow rounded-lg overflow-hidden sm:p-6">
        <dt class="text-sm font-medium text-gray-500 dark:text-jumbo-100 truncate">
          Randomly chosen
        </dt>
        <dd class="mt-1 text-3xl font-semibold text-gray-900 dark:text-jumbo-50">
          {{ object.rnd_choice }}
          time{{ object.rnd_choice|pluralize:'s' }}
        </dd>
      </div>
    </dl>
  </div>
</article>
