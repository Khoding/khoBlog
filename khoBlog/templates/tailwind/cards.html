{% load featured_post comments content_type %}

<article>
  {% if object.categories %}
    <section>
      {% if object.get_featured_cat %}
        <a href="{{ object.get_featured_cat.category.get_absolute_url }}" class="inline-block">
          <span class="inline-flex items-center px-3 py-0.5 rounded-full text-sm font-medium bg-cornflower-100 text-cornflower-800 dark:bg-cornflower-100 dark:text-cornflower-700 hover:bg-cornflower-200 dark:hover:bg-cornflower-200">
            {{ object.featured_cat_title }}
          </span>
        </a>
      {% else %}
        <a href="{{ object.categories.first.get_absolute_url }}" class="inline-block">
          <span class="inline-flex items-center px-3 py-0.5 rounded-full text-sm font-medium bg-cornflower-100 text-cornflower-800 dark:bg-cornflower-100 dark:text-cornflower-700 hover:bg-cornflower-200 dark:hover:bg-cornflower-200">
            {{ object.categories.first }}
          </span>
        </a>
      {% endif %}
      {% if object|to_class_name == "post" %}
        {% if object.pub_date and not object.withdrawn %}
          {% if object.was_published_recently %}
            <div class="inline-flex">
              <span class="h-1.5 w-1.5 rounded-full bg-green-400" aria-hidden="true"></span>
            </div>
          {% elif object.is_scheduled %}
            <div class="inline-flex">
              <span class="h-1.5 w-1.5 rounded-full bg-orange-400" aria-hidden="true"></span>
            </div>
          {% endif %}
        {% elif not object.pub_date %}
          <div class="inline-flex">
            <span class="h-1.5 w-1.5 rounded-full bg-slate-500 dark:bg-slate-300" aria-hidden="true"></span>
          </div>
        {% else %}
          <div class="inline-flex">
            <span class="h-1.5 w-1.5 rounded-full bg-red-500" aria-hidden="true"></span>
          </div>
        {% endif %}
      {% endif %}
    </section>
  {% endif %}
  <section>
    <a href="{{ object.get_absolute_url }}" class="mt-2 inline-block text-lg font-bold text-gray-900 dark:text-jumbo-100 hover:underline">
      {{ object }}
    </a>
    {% if object.get_superuser_post_count_in_category or object.get_post_count_in_category %}
      <p class="text-sm dark:text-jumbo-100">Post count:
        {% if context.user.is_superuser %}
        <strong>{{ object.get_superuser_post_count_in_category }}</strong>
        |
        {% endif %}
        {{ object.get_post_count_in_category }}
      </p>
      <p class="text-sm dark:text-jumbo-100">Percentage:
        {% if context.user.is_superuser %}
        <strong>{{ object.get_superuser_percent_of_posts }}</strong>
        |
        {% endif %}
        {{ object.get_percent_of_posts }}
      </p>
    {% endif %}
    <p class="text-sm dark:text-jumbo-100">
      <time datetime="{{ object.pub_date|date:"c" }}">
        {{ object.pub_date|date:"Y\-m\-d" }}
      </time>
    </p>
    <p class="mt-3 text-base dark:text-jumbo-100">
      {{ object.description }}
    </p>
  </section>
  <section class="mt-3">
    <a href="{{ object.get_absolute_url }}" class="text-base font-semibold text-cornflower-600 hover:text-cornflower-400 dark:text-cornflower-200 dark:hover:text-cornflower-400">
      Read more about this {{ object|to_class_name }}
    </a>
  </section>
</article>
